{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/productos.service\";\nimport * as i2 from \"../services/auth.service\";\nimport * as i3 from \"../services/carrito.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction ProductoComponent_button_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ProductoComponent_button_23_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const num_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.irAPagina(num_r3));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const num_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", num_r3 === ctx_r1.paginaActual);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(num_r3);\n  }\n}\nfunction ProductoComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"img\", 19);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ProductoComponent_div_27_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const pro_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.agregarAlCarrito(pro_r6));\n    });\n    i0.ɵɵtext(9, \"+\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const pro_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", pro_r6.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pro_r6.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pro_r6.categoria);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pro_r6.precio);\n  }\n}\nexport let ProductoComponent = /*#__PURE__*/(() => {\n  class ProductoComponent {\n    constructor(productosService, authService, carritosService) {\n      this.productosService = productosService;\n      this.authService = authService;\n      this.carritosService = carritosService;\n      this.textoBusqueda = '';\n      this.productos = [];\n      this.productosSeleccionados = [];\n      this.productosFiltrados = [];\n      this.paginaActual = 1;\n      this.productosPorPagina = 20; // 5 columnas x 4 filas\n      this.personaAutenticada = this.authService.getUsuarioAutenticado().correo;\n      this.codigoAutenticada = this.authService.getUsuarioAutenticado().codigo;\n    }\n    ngOnInit() {\n      this.productosService.getProductos().subscribe(productos => {\n        // Hacer una copia del array de productos para no mutar el original\n        this.productos = [...productos];\n        this.productosFiltrados = this.productos;\n      }, error => {\n        console.error('Error al obtener productos', error);\n      });\n    }\n    buscar() {\n      if (this.textoBusqueda.trim() === '') {\n        // Si el campo de búsqueda está vacío, mostrar todos los productos\n        this.productosFiltrados = this.productos;\n      } else {\n        // Filtrar los productos según el texto de búsqueda\n        this.productosFiltrados = this.productos.filter(producto => producto.nombre.toLowerCase().includes(this.textoBusqueda.toLowerCase()));\n      }\n    }\n    ordenar(tipo) {\n      let productosOrdenados = [...this.productos];\n      if (tipo === 'precioAsc') {\n        productosOrdenados.sort((a, b) => (a.precio ?? 0) - (b.precio ?? 0));\n      } else if (tipo === 'precioDesc') {\n        productosOrdenados.sort((a, b) => (b.precio ?? 0) - (a.precio ?? 0));\n      } else if (tipo === 'alfabetico') {\n        productosOrdenados.sort((a, b) => (a.nombre ?? \"\").localeCompare(b.nombre ?? \"\"));\n      }\n      this.productos = productosOrdenados;\n    }\n    totalPaginas() {\n      return Math.ceil(this.productos.length / this.productosPorPagina);\n    }\n    siguientePagina() {\n      if (this.paginaActual < this.totalPaginas()) {\n        this.paginaActual++;\n      }\n    }\n    anteriorPagina() {\n      if (this.paginaActual > 1) {\n        this.paginaActual--;\n      }\n    }\n    irAPagina(num) {\n      this.paginaActual = num;\n    }\n    // Función para crear un array de números de páginas para el *ngFor del paginador\n    obtenerNumerosDePagina() {\n      return Array(this.totalPaginas()).fill(0).map((x, i) => i + 1);\n    }\n    agregarAlCarrito(pro) {\n      console.log(\"codigo:\" + this.codigoAutenticada);\n      if (this.codigoAutenticada !== null) {\n        this.carritosService.agregarProductoACarrito(pro, this.codigoAutenticada).subscribe(response => {\n          if (typeof response === 'string') {\n            // La respuesta es un mensaje de éxito como texto\n            console.log(response);\n            // Puedes mostrar este mensaje en tu interfaz de usuario si es necesario\n          } else {\n            // La respuesta es un objeto JSON válido, puedes manejarlo según corresponda\n            console.log(response);\n          }\n        }, error => {\n          console.error(error);\n          // Manejar el error según tus necesidades\n        });\n      } else {\n        console.error('this.codigoAutenticada es null, no se puede llamar a agregarProductoACarrito');\n        // Puedes manejar este caso de error de acuerdo a tus necesidades\n      }\n    }\n    static #_ = this.ɵfac = function ProductoComponent_Factory(t) {\n      return new (t || ProductoComponent)(i0.ɵɵdirectiveInject(i1.ProductosService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.CarritoService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProductoComponent,\n      selectors: [[\"app-producto\"]],\n      decls: 36,\n      vars: 9,\n      consts: [[1, \"container\"], [1, \"search-container\"], [\"for\", \"searchInput\"], [\"type\", \"text\", \"id\", \"searchInput\", \"placeholder\", \"Buscar...\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [1, \"sort-container\"], [\"for\", \"sortMenu\"], [\"id\", \"sortMenu\", 3, \"change\"], [\"sortMenu\", \"\"], [\"value\", \"precioAsc\"], [\"value\", \"precioDesc\"], [\"value\", \"alfabetico\"], [1, \"pagination-controls\"], [3, \"disabled\", \"click\"], [3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"products-grid\", 1, \"product-grid\"], [\"class\", \"product\", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"#\"], [1, \"product\"], [\"alt\", \"Imagen del producto\", 3, \"src\"]],\n      template: function ProductoComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r9 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"main\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Cat\\u00E1logo de Productos\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 1)(4, \"label\", 2);\n          i0.ɵɵtext(5, \"Buscar:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"input\", 3);\n          i0.ɵɵlistener(\"ngModelChange\", function ProductoComponent_Template_input_ngModelChange_6_listener($event) {\n            return ctx.textoBusqueda = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function ProductoComponent_Template_button_click_7_listener() {\n            return ctx.buscar();\n          });\n          i0.ɵɵtext(8, \"Buscar\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"div\", 5)(10, \"label\", 6);\n          i0.ɵɵtext(11, \"Ordenar por:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"select\", 7, 8);\n          i0.ɵɵlistener(\"change\", function ProductoComponent_Template_select_change_12_listener() {\n            i0.ɵɵrestoreView(_r9);\n            const _r0 = i0.ɵɵreference(13);\n            return i0.ɵɵresetView(ctx.ordenar(_r0.value));\n          });\n          i0.ɵɵelementStart(14, \"option\", 9);\n          i0.ɵɵtext(15, \"Precio: bajo a alto\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"option\", 10);\n          i0.ɵɵtext(17, \"Precio: alto a bajo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"option\", 11);\n          i0.ɵɵtext(19, \"Categor\\u00EDa\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"div\", 12)(21, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function ProductoComponent_Template_button_click_21_listener() {\n            return ctx.anteriorPagina();\n          });\n          i0.ɵɵtext(22, \"<\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(23, ProductoComponent_button_23_Template, 2, 3, \"button\", 14);\n          i0.ɵɵelementStart(24, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function ProductoComponent_Template_button_click_24_listener() {\n            return ctx.siguientePagina();\n          });\n          i0.ɵɵtext(25, \">\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(26, \"div\", 15);\n          i0.ɵɵtemplate(27, ProductoComponent_div_27_Template, 10, 4, \"div\", 16);\n          i0.ɵɵpipe(28, \"slice\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(29, \"footer\", 0)(30, \"small\")(31, \"a\", 17);\n          i0.ɵɵtext(32, \"Sobre la tienda\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(33, \" \\u2022 \");\n          i0.ɵɵelementStart(34, \"a\", 17);\n          i0.ɵɵtext(35, \"T\\u00E9rminos y Condiciones\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.textoBusqueda);\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"disabled\", ctx.paginaActual === 1);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.obtenerNumerosDePagina());\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"disabled\", ctx.paginaActual === ctx.totalPaginas());\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(28, 5, ctx.productosFiltrados, (ctx.paginaActual - 1) * ctx.productosPorPagina, ctx.paginaActual * ctx.productosPorPagina));\n        }\n      },\n      dependencies: [i4.NgForOf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i4.SlicePipe],\n      styles: [\".container[_ngcontent-%COMP%]{width:80%;margin:auto}.product-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center}.product[_ngcontent-%COMP%]{width:200px;border:1px solid #ccc;padding:10px;box-shadow:0 2px 5px #0000001a;text-align:center;display:flex;flex-direction:column}.product-image[_ngcontent-%COMP%]{width:100%;max-height:150px;object-fit:cover;margin-bottom:15px}.product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.product-name[_ngcontent-%COMP%]{font-size:1.1em;margin:0}.product-collection[_ngcontent-%COMP%]{font-size:.9em;color:#666}.product-price[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin:0}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;margin-bottom:20px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#333;border:1px solid #ccc;padding:5px 10px;margin:0 5px;cursor:pointer;font-weight:700;transition:background-color .3s,color .3s}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#e0d5b1;color:#333}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:#ccc;cursor:not-allowed}.pagination-controls[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:beige;color:#333;border-color:beige}footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#333;text-decoration:none;margin:0 10px}footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;color:#333;border:none;padding:10px 15px;cursor:pointer;transition:color .3s;font-weight:700;font-size:1rem;line-height:1;display:block;margin:10px auto;text-align:center}.product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#007bff}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.sort-container[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{margin-right:10px}input[type=text][_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{padding:5px 10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}\"]\n    });\n  }\n  return ProductoComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}